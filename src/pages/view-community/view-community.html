<!--
  Generated template for the ViewCommunityPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="signcolor">
    <ion-title>view-community</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>
  <img src="assets/img/communities/{{comm_pic}}" align="center" height="150" width="250" />
  <h5>{{comm_name}}
    <button ion-button style="float: right" small *ngIf="join_button" (click)="onJoin()" color="danger">Join Now</button>
    <button ion-button style="float: right" small *ngIf="leave_button" (click)="doConfirm()" color="danger">Leave Community</button>
  </h5>
  <!--<button ion-button style="float: right" (click)="onJoin()" color="danger" small>Join Now</button>-->
<<<<<<< HEAD

  <!-- <rating ng-model="data.rating" max="data.max" ></rating>-->

  <rating [(ngModel)]="comm_rating" readOnly="false" max="5" emptyStarIconName="star-outline" halfStarIconName="star-half"
    starIconName="star" nullable="false" (ngModelChange)="onModelChange($event)"></rating>
=======
  
 <!-- <rating ng-model="data.rating" max="data.max" ></rating>-->
>>>>>>> 19738b85487d5a19e5ee474a4ace2af2c329ba4d


  <ion-segment [(ngModel)]="Community" padding>
    <ion-segment-button value="posts">
      Posts
    </ion-segment-button>
    <ion-segment-button value="details">
      Details
    </ion-segment-button>
    <ion-segment-button value="members">
      {{comm_member_count}} Members
    </ion-segment-button>
  </ion-segment>

  <div [ngSwitch]="Community">
    <ion-list *ngSwitchCase="'details'">
      <ion-item>
        <h4>
          <ion-icon name="calendar"></ion-icon> {{comm_date | date:'dd-MM-yy'}} </h4>
      </ion-item>
      <ion-item>
        <h4>
        <rating [(ngModel)]="comm_rating" 
        readOnly="false"
        max="5"
        emptyStarIconName="star-outline"
        halfStarIconName="star-half" 
        starIconName="star" 
        nullable="false" 
        (ngModelChange)="onModelChange($event)"></rating>
      </h4>
      </ion-item>
      <ion-item>
        <h4>
          <ion-icon name="person">Created by </ion-icon> {{user_name}} </h4>
      </ion-item>

      {{comm_des}}
    </ion-list>


    <ion-list *ngSwitchCase="'posts'">
      <ion-item (click)="onAddPost()">
        <ion-avatar item-start>
          <img src="{{user_pic}}">
        </ion-avatar>
        <h2>{{user_name}}</h2>
        <p>Add a new Post</p>
      </ion-item>
      <ion-card *ngFor="let item of comm_post_user">
        <ion-thumbnail item-start>
          <img src="{{item.post_pic}}" (click)="onPostClick(item)">
        </ion-thumbnail>
        <ion-card-content (click)="onPostClick(item)">
          <p class="text-wrap">{{item.post_title}}</p>
        </ion-card-content>
        <ion-grid>
          <ion-row>
            <ion-col col-6>
              <button ion-button small *ngIf="item.post_fk_user_id==user_id" (click)="editPost(item.post_id)">
                <ion-icon name="create"></ion-icon>
              </button>
            </ion-col>
            <ion-col col-6>
              <button ion-button small *ngIf="item.post_fk_user_id==user_id" (click)="deletePost(item)">
                <ion-icon name="trash"></ion-icon>
              </button>
            </ion-col>
          </ion-row>
        </ion-grid>

      </ion-card>
    </ion-list>

    <ion-list *ngSwitchCase="'members'">
      <!-- <button ion-button full *ngIf="created_by==user_id" (click)="addNewMember()" ><ion-icon name="person-add"> Add a new Member</ion-icon></button>-->
      <ion-list>
        <ion-item *ngFor="let item of comm_comm_member">
          <ion-avatar item-start>
            <img src="{{item.user_pic}}">
          </ion-avatar>
          <h2>{{item.user_name}}</h2>

        </ion-item>
      </ion-list>
    </ion-list>

  </div>

</ion-content>
