<!--
  Generated template for the ViewPostPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>view-post</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>
  <!-- <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="Pull Down." refreshingSpinner="circles" refreshingText="Loading...">
    </ion-refresher-content>
  </ion-refresher>-->
  <ion-item>
    <ion-avatar item-start>
      <img src="https://letsmeetbackend.herokuapp.com/images/users/{{user_pic}}" (click)="showuser(u_id)">
    </ion-avatar>
    <h2>{{user_name}}</h2>
  </ion-item>
  <ion-card *ngFor="let item of arrPost">

    <img src="https://letsmeetbackend.herokuapp.com/images/posts/{{item.post_pic}}">

    <ion-card-content>
      <h1>{{item.post_title}}</h1>
      <p>{{item.post_des}}</p>
    </ion-card-content>

    <ion-row>
      <ion-col>
        <button *ngIf="like" ion-button icon-left clear small (click)="addLike()">
          <ion-icon name="heart-outline"></ion-icon>
          <div>{{like_cnt}} Likes</div>
        </button>
        <button *ngIf="dislike" ion-button icon-left clear small (click)="onLikeRemove()">
          <ion-icon name="heart" color="danger"></ion-icon>
          <div>{{like_cnt}} Likes</div>
        </button>
      </ion-col>
      <ion-col>
        <button ion-button icon-left clear small>
          <ion-icon name="text"></ion-icon>
          <div>{{comment_count}} Comments</div>
        </button>
      </ion-col>
      <ion-col center text-center>
        <ion-note>
          11h ago
        </ion-note>
      </ion-col>
    </ion-row>
    <ion-list>
      <ion-item *ngFor="let item of arrCommUserPost">
        <ion-avatar item-start (click)="showuser(item.user_id)">
          <img src="https://letsmeetbackend.herokuapp.com/images/users/{{item.user_pic}}">
        </ion-avatar>
        <h2 (click)="showuser(item.user_id)">{{item.user_name}}</h2>
        <p>{{item.com_des}}</p>
        <button *ngIf="item.user_name==user_name" ion-button icon-only clear item-end color="primary" (click)="onDeleteComment(item.com_id)">
          <ion-icon color="primary" small name="trash"></ion-icon>
        </button>
      </ion-item>
      <ion-item>
        <ion-avatar item-start>
          <img src="https://letsmeetbackend.herokuapp.com/images/users/{{user_pic}}">
        </ion-avatar>
        <h2>{{user_name}}</h2>
        <button ion-button icon-only clear item-end color="primary" (click)="newComment()">
          <ion-icon color="primary" name="arrow-dropright-circle"></ion-icon>
        </button>
        <ion-item>
          <ion-input type="text" [(ngModel)]="new_comment" placeholder="Add a Comment..."></ion-input>
        </ion-item>
      </ion-item>
    </ion-list>
  </ion-card>
</ion-content>
